import typescript from "@rollup/plugin-typescript";
import { defineConfig } from "rollup";

export default defineConfig({
	input: ["src/index.ts"],

	external: [
		"lodash",
		"fs",
		"path",
		"glob",
		"prettier",
		"postcss-value-parser",
		"util",
		"fs",
		"path",
		"vite"
	],

	output: {
		name: "index",
		format: "umd",
		file: "dist/index.js",
		globals: {
			lodash: "lodash",
			fs: "fs",
			path: "path",
			glob: "glob",
			prettier: "prettier",
			"postcss-value-parser": "valueParser",
			util: "util",
			fs: "fs",
			path: "path",
			vite: "vite"
		}
	},

	onwarn(warning, warn) {
		if (warning.code === "MISSING_NODE_BUILTINS") return;
		warn(warning);
	},

	plugins: [
		typescript({
			module: "esnext",
			exclude: ["./node_modules/**"]
		})
	]
});
